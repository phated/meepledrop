//>>built
(function(c,f){var a,g,j,n=function(){},h=function(b){for(var a in b)return 0;return 1},k={}.toString,o=function(b){return"[object Function]"==k.call(b)},b=function(b){return"[object String]"==k.call(b)},i=function(b){return"[object Array]"==k.call(b)},d=function(b,a){if(b)for(var d=0;d<b.length;)a(b[d++])},e=function(b,a){for(var d in a)b[d]=a[d];return b},p=function(b,a){return e(Error(b),{src:"dojoLoader",info:a})},l=1,B=function(){return"_"+l++},m=function(b,a,d){return D(b,a,d,0,m)},x=this,E=
x.document,G=E&&E.createElement("DiV"),v=m.has=function(b){return o(s[b])?s[b]=s[b](x,E,G):s[b]},s=v.cache=f.hasCache;v.add=function(b,a,d,i){(void 0===s[b]||i)&&(s[b]=a);return d&&v(b)};for(var F in c.has)v.add(F,c.has[F],0,1);m.async=1;m.eval=function(){};var H={},M=m.signal=function(b,a){var e=H[b];d(e&&e.slice(0),function(b){b.apply(null,i(a)?a:[a])})},A=m.on=function(b,a){var d=H[b]||(H[b]=[]);d.push(a);return{remove:function(){for(var b=0;b<d.length;b++)if(d[b]===a){d.splice(b,1);break}}}},
ma=[],ya={},na=[],C={},q=m.map={},t=[],w={},u="",y={},T={};F={};var Q=function(b){var a,d,i,e;for(a in T)d=T[a],(i=a.match(/^url\:(.+)/))?y["url:"+oa(i[1],b)]=d:"*now"==a?e=d:"*noref"!=a&&(i=U(a,b),y[i.mid]=y["url:"+i.url]=d);e&&e(aa(b));T={}},N=function(b){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(b){return"\\"+b})},O=function(b,a){a.splice(0,a.length);for(var d in b)a.push([d,b[d],RegExp("^"+N(d)+"(/|$)"),d.length]);a.sort(function(b,a){return a[3]-b[3]});return a},I=function(b){var a=
b.name;a||(a=b,b={name:a});b=e({main:"main"},b);b.location=b.location?b.location:a;if(b.packageMap)q[a]=b.packageMap;if(!b.main.indexOf("./"))b.main=b.main.substring(2);C[a]=b},z=[],K=function(a,i,g){for(var c in a){if("waitSeconds"==c)m.waitms=1E3*(a[c]||0);"cacheBust"==c&&(u=a[c]?b(a[c])?a[c]:(new Date).getTime()+"":"");if("baseUrl"==c||"combo"==c)m[c]=a[c];a[c]!==s&&(m.rawConfig[c]=a[c],"has"!=c&&v.add("config-"+c,a[c],0,i))}if(!m.baseUrl)m.baseUrl="./";/\/$/.test(m.baseUrl)||(m.baseUrl+="/");
for(c in a.has)v.add(c,a.has[c],0,i);d(a.packages,I);for(j in a.packagePaths)d(a.packagePaths[j],function(a){var d=j+"/"+a;b(a)&&(a={name:a});a.location=d;I(a)});O(e(q,a.map),t);d(t,function(b){b[1]=O(b[1],[]);if("*"==b[0])t.star=b});O(e(ya,a.paths),na);d(a.aliases,function(a){b(a[0])&&(a[0]=RegExp("^"+N(a[0])+"$"));ma.push(a)});if(i)z.push({config:a.config});else for(c in a.config)i=P(c,g),i.config=e(i.config||{},a.config[c]);if(a.cache)Q(),T=a.cache,a.cache["*noref"]&&Q();M("config",[a,m.rawConfig])};
m.rawConfig={};K(f,1);K(c,1);K(F,1);var r=function(b){ba(function(){d(b.deps,pa)})},D=function(a,d,c,g,f){var l;if(b(a)){if((l=P(a,g,!0))&&l.executed)return l.result;throw p("undefinedModule",a);}i(a)||(K(a,0,g),a=d,d=c);if(i(a))if(a.length){for(var c="require*"+B(),h,j=[],A=0;A<a.length;)h=a[A++],j.push(P(h,g));l=e(V("",c,0,""),{injected:2,deps:j,def:d||n,require:g?g.require:m,gc:1});w[l.mid]=l;r(l);var k=S&&0!="sync";ba(function(){ca(l,k)});l.executed||L.push(l);W()}else d&&d();return f},aa=function(b){if(!b)return m;
var a=b.require;if(!a)a=function(d,i,e){return D(d,i,e,b,a)},b.require=e(a,m),a.module=b,a.toUrl=function(a){return oa(a,b)},a.toAbsMid=function(a){return da(a,b)};return a},L=[],X=[],J={},Aa=function(b){b.injected=1;J[b.mid]=1;b.url&&(J[b.url]=b.pack||1);za()},Y=function(b){b.injected=2;delete J[b.mid];b.url&&delete J[b.url];h(J)&&Ba()},Ca=m.idle=function(){return!X.length&&h(J)&&!L.length&&!S},ea=function(b,a){if(a)for(var d=0;d<a.length;d++)if(a[d][2].test(b))return a[d];return 0},qa=function(b){for(var a=
[],d,i,b=b.replace(/\\/g,"/").split("/");b.length;)d=b.shift(),".."==d&&a.length&&".."!=i?(a.pop(),i=a[a.length-1]):"."!=d&&a.push(i=d);return a.join("/")},V=function(b,a,d,i){return{pid:b,mid:a,pack:d,url:i,executed:0,def:0}},ra=function(b,i,e,c,g,f,l,h){var j,n,A,k;k=/^\./.test(b);if(/(^\/)|(\:)|(\.js$)/.test(b)||k&&!i)return V(0,b,0,b);b=qa(k?i.mid+"/../"+b:b);if(/^\./.test(b))throw p("irrationalPath",b);i&&(A=ea(i.mid,f));(A=(A=A||f.star)&&ea(b,A[1]))&&(b=A[1]+b.substring(A[3]));i=(a=b.match(/^([^\/]+)(\/(.+))?$/))?
a[1]:"";(j=e[i])?b=i+"/"+(n=a[3]||j.main):i="";var B=0;d(ma,function(a){var d=b.match(a[0]);d&&0<d.length&&(B=o(a[1])?b.replace(a[0],a[1]):a[1])});if(B)return ra(B,0,e,c,g,f,l,h);if(e=c[b])return h?V(e.pid,e.mid,e.pack,e.url):c[b];c=(A=ea(b,l))?A[1]+b.substring(A[3]):i?j.location+"/"+n:b;/(^\/)|(\:)/.test(c)||(c=g+c);return V(i,b,j,qa(c+".js"))},U=function(b,a){return ra(b,a,C,w,m.baseUrl,t,na)},sa=function(b,a,d){return b.normalize?b.normalize(a,function(b){return da(b,d)}):da(a,d)},ta=0,P=function(b,
a,d){var i,e;(i=b.match(/^(.+?)\!(.*)$/))?(e=P(i[1],a,d),5===e.executed&&!e.load&&fa(e),e.load?(i=sa(e,i[2],a),b=e.mid+"!"+(e.dynamic?++ta+"!":"")+i):(i=i[2],b=e.mid+"!"+ ++ta+"!waitingForPlugin"),b={plugin:e,mid:b,req:aa(a),prid:i}):b=U(b,a);return w[b.mid]||!d&&(w[b.mid]=b)},da=m.toAbsMid=function(b,a){return U(b,a).mid},oa=m.toUrl=function(b,a){var d=U(b+"/x",a),i=d.url;return ua(0===d.pid?b:i.substring(0,i.length-5))},va={injected:2,executed:5,def:3,result:3},R=function(b){return w[b]=e({mid:b},
va)},Da=R("require"),Ea=R("exports"),Fa=R("module"),Z={},ga=0,fa=function(b){var a=b.result;b.dynamic=a.dynamic;b.normalize=a.normalize;b.load=a.load;return b},Ga=function(b){var a={};d(b.loadQ,function(d){var i=sa(b,d.prid,d.req.module),c=b.dynamic?d.mid.replace(/waitingForPlugin$/,i):b.mid+"!"+i,i=e(e({},d),{mid:c,prid:i,injected:0});w[c]||wa(w[c]=i);a[d.mid]=w[c];Y(d);delete w[d.mid]});b.loadQ=0;var i=function(b){for(var d=b.deps||[],i=0;i<d.length;i++)(b=a[d[i].mid])&&(d[i]=b)},c;for(c in w)i(w[c]);
d(L,i)},ha=function(b){m.trace("loader-finish-exec",[b.mid]);b.executed=5;b.defOrder=ga++;b.loadQ&&(fa(b),Ga(b));for(g=0;g<L.length;)L[g]===b?L.splice(g,1):g++;/^require\*/.test(b.mid)&&delete w[b.mid]},Ha=[],ca=function(b,a){if(4===b.executed)return m.trace("loader-circular-dependency",[Ha.concat(b.mid).join("->")]),!b.def||a?Z:b.cjs&&b.cjs.exports;if(!b.executed){if(!b.def)return Z;var d=b.mid,i=b.deps||[],e,c=[],g=0;for(b.executed=4;g<i.length;){e=i[g++];e=e===Da?aa(b):e===Ea?b.cjs.exports:e===
Fa?b.cjs:ca(e,a);if(e===Z)return b.executed=0,m.trace("loader-exec-module",["abort",d]),Z;c.push(e)}m.trace("loader-run-factory",[b.mid]);d=b.def;c=o(d)?d.apply(null,c):d;b.result=void 0===c&&b.cjs?b.cjs.exports:c;ha(b)}return b.result},S=0,ba=function(b){try{S++,b()}finally{S--}Ca()&&M("idle",[])},W=function(){S||ba(function(){for(var b,a,d=0;d<L.length;)b=ga,a=L[d],ca(a),b!=ga?d=0:d++})};void 0===v("dojo-loader-eval-hint-url")&&v.add("dojo-loader-eval-hint-url",1);var ua=function(b){b+="";return b+
(u?(/\?/.test(b)?"&":"?")+u:"")},wa=function(b){var a=b.plugin;5===a.executed&&!a.load&&fa(a);var d=function(a){b.result=a;Y(b);ha(b);W()};a.load?a.load(b.prid,b.req,d):a.loadQ?a.loadQ.push(b):(a.loadQ=[b],L.unshift(a),pa(a))},$=0,ia=0,ja=0,Ia=function(b,a){v("config-stripStrict")&&(b=b.replace(/"use strict"/g,""));ja=1;b===$?$.call(null):m.eval(b,v("dojo-loader-eval-hint-url")?a.url:a.mid);ja=0},pa=function(b){var a=b.mid,d=b.url;if(!b.executed&&!b.injected&&!(J[a]||b.url&&(b.pack&&J[b.url]===b.pack||
1==J[b.url])))if(Aa(b),b.plugin)wa(b);else{var i=function(){Ja(b);2!==b.injected&&(Y(b),e(b,va),m.trace("loader-define-nonmodule",[b.url]));W()};($=y[a]||y["url:"+b.url])?(m.trace("loader-inject",["cache",b.mid,d]),Ia($,b),i()):(m.trace("loader-inject",["script",b.mid,d]),ia=b,m.injectUrl(ua(d),i,b),ia=0)}},ka=function(b,a,d){m.trace("loader-define-module",[b.mid,a]);if(2===b.injected)return M("error",p("multipleDefine",b)),b;e(b,{deps:a,def:d,cjs:{id:b.mid,uri:b.url,exports:b.result={},setExports:function(a){b.cjs.exports=
a},config:function(){return b.config}}});for(var i=0;i<a.length;i++)a[i]=P(a[i],b);Y(b);if(!o(d)&&!a.length)b.result=d,ha(b);return b},Ja=function(b,a){for(var i=[],e,c;X.length;)c=X.shift(),a&&(c[0]=a.shift()),e=c[0]&&P(c[0])||b,i.push([e,c[1],c[2]]);Q(b);d(i,function(b){r(ka.apply(null,b))})},Ba=n,za=n;v.add("ie-event-behavior",!!E.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var la=function(b,a,d,i){if(v("ie-event-behavior"))return b.attachEvent(d,i),function(){b.detachEvent(d,
i)};b.addEventListener(a,i,!1);return function(){b.removeEventListener(a,i,!1)}},Ka=la(window,"load","onload",function(){m.pageLoaded=1;"complete"!=E.readyState&&(E.readyState="complete");Ka()}),xa=E.getElementsByTagName("script")[0],La=xa.parentNode;m.injectUrl=function(b,a,d){var d=d.node=E.createElement("script"),i=la(d,"load","onreadystatechange",function(b){var b=b||window.event,d=b.target||b.srcElement;if("load"===b.type||/complete|loaded/.test(d.readyState))i(),e(),a&&a()}),e=la(d,"error",
"onerror",function(a){i();e();M("error",p("scriptError",[b,a]))});d.type="text/javascript";d.charset="utf-8";d.src=b;La.insertBefore(d,xa);return d};m.log=n;m.trace=n;R=function(a,d,i){var e=arguments.length,c=["require","exports","module"],g=[0,a,d];1==e?g=[0,o(a)?c:[],a]:2==e&&b(a)?g=[a,o(d)?c:[],d]:3==e&&(g=[a,d,i]);m.trace("loader-define",g.slice(0,2));if((e=g[0]&&P(g[0]))&&!J[e.mid])r(ka(e,g[1],g[2]));else if(!v("ie-event-behavior")||ja)X.push(g);else{e=e||ia;if(!e)for(a in J)if((c=w[a])&&c.node&&
"interactive"===c.node.readyState){e=c;break}e?(Q(e),r(ka(e,g[1],g[2]))):M("error",p("ieDefineFailed",g[0]));W()}};R.amd={vendor:"dojotoolkit.org"};e(e(m,f.loaderPatch),c.loaderPatch);A("error",function(b){try{if(console.error(b),b instanceof Error)for(var a in b);}catch(d){}});e(m,{uid:B,cache:y,packs:C});if(!x.define)x.define=R,x.require=m,d(z,function(b){K(b)}),A=F.deps||c.deps||f.deps,F=F.callback||c.callback||f.callback,m.boot=A||F?[A||[],F]:0})(this.dojoConfig||this.djConfig||this.require||
{},{async:1,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../frozen",main:"GameCore",name:"frozen"}]});
require({cache:{"dist/frozen":function(){define([],1)},"frozen/box2d/Box":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(c,f){var a=Box2D.Common.Math.b2Vec2,g=Box2D.Dynamics.b2BodyDef,j=Box2D.Dynamics.b2Body,n=Box2D.Dynamics.b2FixtureDef,h=Box2D.Dynamics.b2World,k=Box2D.Collision.Shapes.b2PolygonShape,o=Box2D.Collision.Shapes.b2CircleShape,b=Box2D.Dynamics.Joints.b2RevoluteJointDef;return c(null,{intervalRate:60,adaptive:!1,width:640,height:480,scale:30,bodiesMap:[],fixturesMap:[],
world:null,gravityX:0,gravityY:10,allowSleep:!0,resolveCollisions:!1,contactListener:null,collisions:null,constructor:function(b){c.safeMixin(this,b);if(b.intervalRate)this.intervalRate=parseInt(b.intervalRate,10);this.world=new h(new a(this.gravityX,this.gravityY),this.allowSleep);this.resolveCollisions&&this.addContactListener(this.contactListener||this)},update:function(b){if(this.resolveCollisions)this.collisions={};var a=Date.now();b?this.world.Step(b/1E3,10,10):this.world.Step(this.adaptive?
(a-this.lastTimestamp)/1E3:1/this.intervalRate,10,10);this.world.ClearForces();return Date.now()-a},getState:function(){for(var b={},a=this.world.GetBodyList();a;a=a.m_next)if(a.IsActive()&&"undefined"!==typeof a.GetUserData()&&null!==a.GetUserData()&&(b[a.GetUserData()]={x:a.GetPosition().x,y:a.GetPosition().y,angle:a.GetAngle(),center:{x:a.GetWorldCenter().x,y:a.GetWorldCenter().y},linearVelocity:a.m_linearVelocity,angularVelocity:a.m_angularVelocity},this.resolveCollisions))b[a.GetUserData()].collisions=
this.collisions[a.GetUserData()]||null;return b},updateExternalState:function(b){var a=this.getState(),e;for(e in a){var c=b[e];c&&!c.staticBody&&c.update(a[e])}},setBodies:function(b){for(var a in b)this.addBody(b[a]);this.ready=!0},addBody:function(b){var d=new g,e=new n,c,f,h,m;e.restitution=b.restitution;e.density=b.density;e.friction=b.friction;d.type=b.staticBody?j.b2_staticBody:j.b2_dynamicBody;d.position.x=b.x;d.position.y=b.y;d.userData=b.id;d.angle=b.angle;d.linearDamping=b.linearDamping;
d.angularDamping=b.angularDamping;var x=this.world.CreateBody(d);if(b.radius)e.shape=new o(b.radius),x.CreateFixture(e);else if(b.points){f=[];for(d=0;d<b.points.length;d++)h=new a,h.Set(b.points[d].x,b.points[d].y),f[d]=h;e.shape=new k;e.shape.SetAsArray(f,f.length);x.CreateFixture(e)}else if(b.polys)for(c=0;c<b.polys.length;c++){f=b.polys[c];m=[];for(d=0;d<f.length;d++)h=new a,h.Set(f[d].x,f[d].y),m[d]=h;e.shape=new k;e.shape.SetAsArray(m,m.length);x.CreateFixture(e)}else e.shape=new k,e.shape.SetAsBox(b.halfWidth,
b.halfHeight),x.CreateFixture(e);this.bodiesMap[b.id]=x},setPosition:function(b,d,e){this.bodiesMap[b].SetPosition(new a(d,e))},setAngle:function(b,a){this.bodiesMap[b].SetAngle(a)},setLinearVelocity:function(b,d,e){this.bodiesMap[b].SetLinearVelocity(new a(d,e))},applyImpulseDegrees:function(b,d,e){b=this.bodiesMap[b];b.ApplyImpulse(new a(Math.sin(d*(Math.PI/180))*e,-1*Math.cos(d*(Math.PI/180))*e),b.GetWorldCenter())},applyForceDegrees:function(b,d,e){b=this.bodiesMap[b];b.ApplyForce(new a(Math.sin(d*
(Math.PI/180))*e,-1*Math.cos(d*(Math.PI/180))*e),b.GetWorldCenter())},applyImpulse:function(b,d,e){b=this.bodiesMap[b];b.ApplyImpulse(new a(Math.sin(d)*e,-1*Math.cos(d)*e),b.GetWorldCenter())},applyForce:function(b,d,e){b=this.bodiesMap[b];b.ApplyForce(new a(Math.sin(d)*e,-1*Math.cos(d)*e),b.GetWorldCenter())},applyTorque:function(b,a){this.bodiesMap[b].ApplyTorque(a)},removeBody:function(b){this.bodiesMap[b]&&(this.fixturesMap[b]&&this.bodiesMap[b].DestroyFixture(this.fixturesMap[b]),this.world.DestroyBody(this.bodiesMap[b]),
delete this.bodiesMap[b])},addContactListener:function(b){var a=new Box2D.Dynamics.b2ContactListener;if(b.beginContact)a.BeginContact=function(a){b.beginContact(a.GetFixtureA().GetBody().GetUserData(),a.GetFixtureB().GetBody().GetUserData())};if(b.EndContact)a.endContact=function(a){b.endContact(a.GetFixtureA().GetBody().GetUserData(),a.GetFixtureB().GetBody().GetUserData())};if(b.postSolve)a.PostSolve=function(a,d){b.postSolve(a.GetFixtureA().GetBody().GetUserData(),a.GetFixtureB().GetBody().GetUserData(),
d.normalImpulses[0])};this.world.SetContactListener(a)},addRevoluteJoint:function(a,d,e){var a=this.bodiesMap[a],d=this.bodiesMap[d],c=new b;c.Initialize(a,d,a.GetWorldCenter());e&&f.mixin(c,e);this.world.CreateJoint(c)},beginContact:function(){},endContact:function(){},postSolve:function(b,a,e){this.collisions[b]=this.collisions[b]||[];this.collisions[b].push({id:a,impulse:e});this.collisions[a]=this.collisions[a]||[];this.collisions[a].push({id:b,impulse:e})}})})},"dojo/_base/declare":function(){define(["./kernel",
"../has","./lang"],function(c,f,a){function g(b,a){throw Error("declare"+(a?" "+a:"")+": "+b);}function j(b,a,d){var e,c,i,f,l,h,p,j=this._inherited=this._inherited||{};"string"==typeof b&&(e=b,b=a,a=d);d=0;f=b.callee;(e=e||f.nom)||g("can't deduce a name to call inherited()",this.declaredClass);l=this.constructor._meta;i=l.bases;p=j.p;if(e!=H){if(j.c!==f&&(p=0,h=i[0],l=h._meta,l.hidden[e]!==f)){(c=l.chains)&&"string"==typeof c[e]&&g("calling chained method with inherited: "+e,this.declaredClass);
do if(l=h._meta,c=h.prototype,l&&(c[e]===f&&c.hasOwnProperty(e)||l.hidden[e]===f))break;while(h=i[++p]);p=h?p:-1}if(h=i[++p])if(c=h.prototype,h._meta&&c.hasOwnProperty(e))d=c[e];else{f=G[e];do if(c=h.prototype,(d=c[e])&&(h._meta?c.hasOwnProperty(e):d!==f))break;while(h=i[++p])}d=h&&d||G[e]}else{if(j.c!==f&&(p=0,(l=i[0]._meta)&&l.ctor!==f)){c=l.chains;for((!c||"manual"!==c.constructor)&&g("calling chained constructor with inherited",this.declaredClass);(h=i[++p])&&!((l=h._meta)&&l.ctor===f););p=h?
p:-1}for(;(h=i[++p])&&!(d=(l=h._meta)?l.ctor:h););d=h&&d}j.c=d;j.p=p;if(d)return!0===a?d:d.apply(this,a||b)}function n(b,a){return"string"==typeof b?this.__inherited(b,a,!0):this.__inherited(b,!0)}function h(b,a,d){var e=this.getInherited(b,a);if(e)return e.apply(this,d||a||b)}function k(b){for(var a=this.constructor._meta.bases,d=0,e=a.length;d<e;++d)if(a[d]===b)return!0;return this instanceof b}function o(b,d){for(var e in d)e!=H&&d.hasOwnProperty(e)&&(b[e]=d[e]);if(f("bug-for-in-skips-shadowed"))for(var c=
a._extraNames,i=c.length;i;)e=c[--i],e!=H&&d.hasOwnProperty(e)&&(b[e]=d[e])}function b(b){x.safeMixin(this.prototype,b);return this}function i(b){return x([this].concat(b))}function d(b,a){return function(){var q;var d=arguments,e=d,c=d[0],i,g;g=b.length;var f;if(!(this instanceof d.callee))return m(d);if(a&&(c&&c.preamble||this.preamble)){f=Array(b.length);f[0]=d;for(i=0;;){if(c=d[0])(c=c.preamble)&&(d=c.apply(this,d)||d);c=b[i].prototype;(c=c.hasOwnProperty("preamble")&&c.preamble)&&(d=c.apply(this,
d)||d);if(++i==g)break;f[i]=d}}for(i=g-1;0<=i;--i)c=b[i],(q=(g=c._meta)?g.ctor:c,c=q)&&c.apply(this,f?f[i]:d);(c=this.postscript)&&c.apply(this,e)}}function e(b,a){return function(){var d=arguments,e=d,c=d[0];if(!(this instanceof d.callee))return m(d);if(a){if(c)(c=c.preamble)&&(e=c.apply(this,e)||e);(c=this.preamble)&&c.apply(this,e)}b&&b.apply(this,d);(c=this.postscript)&&c.apply(this,d)}}function p(b){return function(){var q;var a=arguments,d=0,e,c;if(!(this instanceof a.callee))return m(a);for(;e=
b[d];++d)if(q=(c=e._meta)?c.ctor:e,e=q){e.apply(this,a);break}(e=this.postscript)&&e.apply(this,a)}}function l(b,a,d){return function(){var e,c,i=0,g=1;d&&(i=a.length-1,g=-1);for(;e=a[i];i+=g)c=e._meta,(e=(c?c.hidden:e.prototype)[b])&&e.apply(this,arguments)}}function B(b){s.prototype=b.prototype;b=new s;s.prototype=null;return b}function m(b){var a=b.callee,d=B(a);a.apply(d,b);return d}function x(c,f,h){"string"!=typeof c&&(h=f,f=c,c="");var h=h||{},m,C,q,t,w,u,y,s=1,Q=f;if("[object Array]"==v.call(f)){s=
c;q=[];t=[{cls:0,refs:[]}];u={};for(var N=1,O=f.length,I=0,z,K,r,D;I<O;++I){(z=f[I])?"[object Function]"!=v.call(z)&&g("mixin #"+I+" is not a callable constructor.",s):g("mixin #"+I+" is unknown. Did you use dojo.require to pull it in?",s);K=z._meta?z._meta.bases:[z];r=0;for(z=K.length-1;0<=z;--z){D=K[z].prototype;if(!D.hasOwnProperty("declaredClass"))D.declaredClass="uniqName_"+F++;D=D.declaredClass;u.hasOwnProperty(D)||(u[D]={count:0,refs:[],cls:K[z]},++N);D=u[D];r&&r!==D&&(D.refs.push(r),++r.count);
r=D}++r.count;t[0].refs.push(r)}for(;t.length;){r=t.pop();q.push(r.cls);for(--N;C=r.refs,1==C.length;){r=C[0];if(!r||--r.count){r=0;break}q.push(r.cls);--N}if(r)for(I=0,O=C.length;I<O;++I)r=C[I],--r.count||t.push(r)}N&&g("can't build consistent linearization",s);z=f[0];q[0]=z?z._meta&&z===q[q.length-z._meta.bases.length]?z._meta.bases.length:1:0;u=q;q=u[0];s=u.length-q;f=u[s]}else u=[0],f?"[object Function]"==v.call(f)?(q=f._meta,u=u.concat(q?q.bases:f)):g("base class is not a callable constructor.",
c):null!==f&&g("unknown base class. Did you use dojo.require to pull it in?",c);if(f)for(C=s-1;;--C){m=B(f);if(!C)break;q=u[C];(q._meta?o:E)(m,q.prototype);t=new Function;t.superclass=f;t.prototype=m;f=m.constructor=t}else m={};x.safeMixin(m,h);q=h.constructor;if(q!==G.constructor)q.nom=H,m.constructor=q;for(C=s-1;C;--C)(q=u[C]._meta)&&q.chains&&(y=E(y||{},q.chains));m["-chains-"]&&(y=E(y||{},m["-chains-"]));q=!y||!y.hasOwnProperty(H);u[0]=t=y&&"manual"===y.constructor?p(u):1==u.length?e(h.constructor,
q):d(u,q);t._meta={bases:u,hidden:h,chains:y,parents:Q,ctor:h.constructor};t.superclass=f&&f.prototype;t.extend=b;t.createSubclass=i;t.prototype=m;m.constructor=t;m.getInherited=n;m.isInstanceOf=k;m.inherited=M;m.__inherited=j;if(c)m.declaredClass=c,a.setObject(c,t);if(y)for(w in y)if(m[w]&&"string"==typeof y[w]&&w!=H)q=m[w]=l(w,u,"after"===y[w]),q.nom=w;return t}var E=a.mixin,G=Object.prototype,v=G.toString,s,F=0,H="constructor";s=function(){};var M=c.config.isDebug?h:j;c.safeMixin=x.safeMixin=function(b,
d){var e,c;for(e in d)if(c=d[e],(c!==G[e]||!(e in G))&&e!=H){if("[object Function]"==v.call(c))c.nom=e;b[e]=c}if(f("bug-for-in-skips-shadowed"))for(var i=a._extraNames,g=i.length;g;)if(e=i[--g],c=d[e],(c!==G[e]||!(e in G))&&e!=H){if("[object Function]"==v.call(c))c.nom=e;b[e]=c}return b};return c.declare=x})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(c,f,a,g){var j,c={},n={},h={config:f,global:this,dijit:c,dojox:n},c={dojo:["dojo",h],dijit:["dijit",c],
dojox:["dojox",n]},g=a.map&&a.map[g.id.match(/[^\/]+/)[0]];for(j in g)c[j]?c[j][0]=g[j]:c[j]=[g[j],{}];for(j in c)g=c[j],g[1]._scopeName=g[0],f.noGlobals||(this[g[0]]=g[1]);h.scopeMap=c;h.baseUrl=h.config.baseUrl=a.baseUrl;h.isAsync=a.async;h.locale=f.locale;f="$Rev: 30226 $".match(/\d+/);h.version={major:1,minor:8,patch:3,flag:"",revision:f?+f[0]:NaN,toString:function(){var a=h.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};h.exit=function(){};h.deprecated=h.experimental=
function(){};h._hasResource={};return h})},"dojo/has":function(){define(["require","module"],function(c){var f=c.has||function(){};f.add("dom-addeventlistener",!!document.addEventListener);f.add("touch","ontouchstart"in document);f.add("device-width",screen.availWidth||innerWidth);c=document.createElement("form");f.add("dom-attributes-explicit",0==c.attributes.length);f.add("dom-attributes-specified-flag",0<c.attributes.length&&40>c.attributes.length);f.clearElement=function(a){a.innerHTML="";return a};
f.normalize=function(a,c){var j=a.match(/[\?:]|[^:\?]*/g),n=0,h=function(a){var c=j[n++];if(":"==c)return 0;if("?"==j[n++]){if(!a&&f(c))return h();h(!0);return h(a)}return c||0};return(a=h())&&c(a)};f.load=function(a,c,f){a?c([a],f):f()};return f})},"dojo/_base/config":function(){define(["../has","require"],function(c,f){var a={},g=f.rawConfig,j;for(j in g)a[j]=g[j];return a})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(c,f){f.add("bug-for-in-skips-shadowed",function(){for(var b in{toString:1})return 0;
return 1});var a=f("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],g=a.length,j=function(b,a,d){var e,f=0,g=c.global;if(!d)if(b.length){e=b[f++];try{d=c.scopeMap[e]&&c.scopeMap[e][1]}catch(h){}d=d||(e in g?g[e]:a?g[e]={}:void 0)}else return g;for(;d&&(e=b[f++]);)d=e in d?d[e]:a?d[e]={}:void 0;return d},n=Object.prototype.toString,h=function(b,a,d){return(d||[]).concat(Array.prototype.slice.call(b,a||0))},k=
/\{([^\}]+)\}/g,o={_extraNames:a,_mixin:function(b,c,d){var e,h,l,j={};for(e in c)if(h=c[e],!(e in b)||b[e]!==h&&(!(e in j)||j[e]!==h))b[e]=d?d(h):h;if(f("bug-for-in-skips-shadowed")&&c)for(l=0;l<g;++l)if(e=a[l],h=c[e],!(e in b)||b[e]!==h&&(!(e in j)||j[e]!==h))b[e]=d?d(h):h;return b},mixin:function(b,a){b||(b={});for(var d=1,c=arguments.length;d<c;d++)o._mixin(b,arguments[d]);return b},setObject:function(b,a,d){var c=b.split("."),b=c.pop();return(d=j(c,!0,d))&&b?d[b]=a:void 0},getObject:function(b,
a,d){return j(b.split("."),a,d)},exists:function(b,a){return void 0!==o.getObject(b,!1,a)},isString:function(b){return"string"==typeof b||b instanceof String},isArray:function(b){return b&&(b instanceof Array||"array"==typeof b)},isFunction:function(b){return"[object Function]"===n.call(b)},isObject:function(b){return void 0!==b&&(null===b||"object"==typeof b||o.isArray(b)||o.isFunction(b))},isArrayLike:function(b){return b&&void 0!==b&&!o.isString(b)&&!o.isFunction(b)&&!(b.tagName&&"form"==b.tagName.toLowerCase())&&
(o.isArray(b)||isFinite(b.length))},isAlien:function(b){return b&&!o.isFunction(b)&&/\{\s*\[native code\]\s*\}/.test(""+b)},extend:function(b,a){for(var d=1,c=arguments.length;d<c;d++)o._mixin(b.prototype,arguments[d]);return b},_hitchArgs:function(b,a){var d=o._toArray(arguments,2),e=o.isString(a);return function(){var f=o._toArray(arguments),g=e?(b||c.global)[a]:a;return g&&g.apply(b||this,d.concat(f))}},hitch:function(b,a){if(2<arguments.length)return o._hitchArgs.apply(c,arguments);a||(a=b,b=
null);if(o.isString(a)){b=b||c.global;if(!b[a])throw['lang.hitch: scope["',a,'"] is null (scope="',b,'")'].join("");return function(){return b[a].apply(b,arguments||[])}}return!b?a:function(){return a.apply(b,arguments||[])}},delegate:function(){function b(){}return function(a,d){b.prototype=a;var c=new b;b.prototype=null;d&&o._mixin(c,d);return c}}(),_toArray:f("ie")?function(){function b(b,a,c){c=c||[];for(a=a||0;a<b.length;a++)c.push(b[a]);return c}return function(a){return(a.item?b:h).apply(this,
arguments)}}():h,partial:function(b){return o.hitch.apply(c,[null].concat(o._toArray(arguments)))},clone:function(b){if(!b||"object"!=typeof b||o.isFunction(b))return b;if(b.nodeType&&"cloneNode"in b)return b.cloneNode(!0);if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return RegExp(b);var a,d,c;if(o.isArray(b)){a=[];for(d=0,c=b.length;d<c;++d)d in b&&a.push(o.clone(b[d]))}else a=b.constructor?new b.constructor:{};return o._mixin(a,b,o.clone)},trim:String.prototype.trim?
function(b){return b.trim()}:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,a,d){return b.replace(d||k,o.isFunction(a)?a:function(b,d){return o.getObject(d,!1,a)})}};o.mixin(c,o);return o})},"dojo/sniff":function(){define("dojo/sniff",["./has"],function(c){var f=navigator,a=f.userAgent,f=f.appVersion,g=parseFloat(f);c.add("air",0<=a.indexOf("AdobeAIR"));c.add("khtml",0<=f.indexOf("Konqueror")?g:void 0);c.add("webkit",parseFloat(a.split("WebKit/")[1])||void 0);c.add("chrome",
parseFloat(a.split("Chrome/")[1])||void 0);c.add("safari",0<=f.indexOf("Safari")&&!c("chrome")?parseFloat(f.split("Version/")[1]):void 0);c.add("mac",0<=f.indexOf("Macintosh"));c.add("quirks","BackCompat"==document.compatMode);c.add("ios",/iPhone|iPod|iPad/.test(a));c.add("android",parseFloat(a.split("Android ")[1])||void 0);if(!c("webkit")){0<=a.indexOf("Opera")&&c.add("opera",9.8<=g?parseFloat(a.split("Version/")[1])||g:g);0<=a.indexOf("Gecko")&&!c("khtml")&&!c("webkit")&&c.add("mozilla",g);c("mozilla")&&
c.add("ff",parseFloat(a.split("Firefox/")[1]||a.split("Minefield/")[1])||void 0);if(document.all&&!c("opera"))a=parseFloat(f.split("MSIE ")[1])||void 0,(f=document.documentMode)&&5!=f&&Math.floor(a)!=f&&(a=f),c.add("ie",a);c.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return c})},"frozen/box2d/CircleEntity":function(){define(["dojo/_base/declare","./Entity"],function(c,f){return c([f],{radius:1,constructor:function(a){c.safeMixin(this,a)},draw:function(a,c){a.fillStyle=this.color;a.beginPath();
a.arc(this.x*c,this.y*c,this.radius*c,0,2*Math.PI,!0);a.closePath();a.fill();a.strokeStyle="#000000";a.beginPath();a.arc(this.x*c,this.y*c,this.radius*c,0,2*Math.PI,!0);a.closePath();a.stroke();this.inherited(arguments)}})})},"frozen/box2d/Entity":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(c,f){return c(null,{id:0,x:0,y:0,angle:0,center:0,restitution:0.3,density:1,friction:0.9,linearDamping:0,linearVelocity:null,angularVelocity:0,angularDamping:0,staticBody:!1,color:"rgba(128,128,128,0.5)",
hidden:!1,constructor:function(a){c.safeMixin(this,a)},update:function(a){f.mixin(this,a)},draw:function(a,c){a.fillStyle="black";a.beginPath();a.arc(this.x*c,this.y*c,4,0,2*Math.PI,!0);a.closePath();a.fill();a.fillStyle="yellow";a.beginPath();a.arc(this.center.x*c,this.center.y*c,2,0,2*Math.PI,!0);a.closePath();a.fill()}})})},"frozen/box2d/PolygonEntity":function(){define(["dojo/_base/declare","./Entity"],function(c,f){return c([f],{points:[],constructor:function(a){c.safeMixin(this,a)},draw:function(a,
c){a.save();a.translate(this.x*c,this.y*c);a.rotate(this.angle);a.translate(-this.x*c,-this.y*c);a.fillStyle=this.color;a.beginPath();a.moveTo((this.x+this.points[0].x)*c,(this.y+this.points[0].y)*c);for(var f=1;f<this.points.length;f++)a.lineTo((this.points[f].x+this.x)*c,(this.points[f].y+this.y)*c);a.lineTo((this.x+this.points[0].x)*c,(this.y+this.points[0].y)*c);a.closePath();a.fill();a.stroke();a.restore();this.inherited(arguments)}})})},"frozen/box2d/MultiPolygonEntity":function(){define(["dojo/_base/declare",
"./Entity"],function(c,f){return c([f],{polys:[],points:null,constructor:function(a){c.safeMixin(this,a)},draw:function(a,c){a.save();a.translate(this.x*c,this.y*c);a.rotate(this.angle);a.translate(-this.x*c,-this.y*c);a.fillStyle=this.color;for(var f=0;f<this.polys.length;f++){a.beginPath();a.moveTo((this.x+this.polys[f][0].x)*c,(this.y+this.polys[f][0].y)*c);for(var n=1;n<this.polys[f].length;n++)a.lineTo((this.polys[f][n].x+this.x)*c,(this.polys[f][n].y+this.y)*c);a.lineTo((this.x+this.polys[f][0].x)*
c,(this.y+this.polys[f][0].y)*c);a.closePath();a.fill();a.stroke()}a.restore();this.inherited(arguments)}})})},"frozen/box2d/RectangleEntity":function(){define(["dojo/_base/declare","./Entity"],function(c,f){return c([f],{halfWidth:1,halfHeight:1,constructor:function(a){c.safeMixin(this,a)},draw:function(a,c){a.save();a.translate(this.x*c,this.y*c);a.rotate(this.angle);a.translate(-this.x*c,-this.y*c);a.fillStyle=this.color;a.fillRect((this.x-this.halfWidth)*c,(this.y-this.halfHeight)*c,2*this.halfWidth*
c,2*this.halfHeight*c);a.restore();this.inherited(arguments)}})})},"frozen/reiner/Creature":function(){define(["dojo/_base/declare","dojo/_base/lang","../Sprite","../Animation"],function(c,f,a,g){return c([a],{statics:{EAST:0,NORTH:1,NORTHEAST:2,NORTHWEST:3,SOUTH:4,SOUTHEAST:5,SOUTHWEST:6,WEST:7,STATE_WALKING:0,STATE_DYING:1,STATE_IDLE:2},state:0,walkingAnims:[],dyingAnims:[],idleAnims:[],direction:0,constructor:function(a){this.state=this.statics.STATE_IDLE;this.direction=this.statics.EAST;c.safeMixin(this,
a)},update:function(a){this.x+=this.dx*a;this.y+=this.dy*a;if(this.state!==this.statics.STATE_DYING){if(0<this.dx&&0===this.dy)this.direction=this.statics.EAST;else if(0===this.dx&&0>this.dy)this.direction=this.statics.NORTH;else if(0<this.dx&&0>this.dy)this.direction=this.statics.NORTHEAST;else if(0>this.dx&&0>this.dy)this.direction=this.statics.NORTHWEST;else if(0===this.dx&&0<this.dy)this.direction=this.statics.SOUTH;else if(0<this.dx&&0<this.dy)this.direction=this.statics.SOUTHEAST;else if(0>
this.dx&&0<this.dy)this.direction=this.statics.SOUTHWEST;else if(0>this.dx&&0===this.dy)this.direction=this.statics.WEST;this.state=0===this.dx&&0===this.dy?this.statics.STATE_IDLE:this.statics.STATE_WALKING}this.anim=this.state===this.statics.STATE_WALKING?this.walkingAnims[this.direction]:this.state===this.statics.STATE_DYING?this.dyingAnims[this.direction]:this.idleAnims[this.direction];this.anim.update(a)},createAnimations:function(a,c,h,k,o,b){var i=[],d=f.isArray(c),e=1;b||(b=0);for(var p=0;8>
p;p++){i[p]=new g({height:k,width:o,image:h});for(var l=0;l<a;l++)e=d?c[l]:c,i[p].addFrame(e,l+a*p,b)}return i}})})},"frozen/Sprite":function(){define(["dojo/_base/declare"],function(c){var f=c(null,{x:0,y:0,dx:0,dy:0,name:null,collisionRadius:40,constructor:function(a){c.safeMixin(this,a)},update:function(a){this.x+=this.dx*a;this.y+=this.dy*a;this.anim.update(a)},getX:function(){return this.x},getY:function(){return this.y},setX:function(a){this.x=a},setY:function(a){this.y=a},getWidth:function(){return this.anim.width},
getHeight:function(){return this.anim.height},getVelocityX:function(){return this.dx},getVelocityY:function(){return this.dy},setVelocityX:function(a){this.dx=this.limitSpeed(a)},setVelocityY:function(a){this.dy=this.limitSpeed(a)},limitSpeed:function(a){return this.getMaxSpeed()?Math.abs(a)>this.getMaxSpeed()?0<a?this.getMaxSpeed():0>a?this.getMaxSpeed():0:a:a},getMaxSpeed:function(){return this.maxSpeed},getCurrentFrame:function(){if(this.anim)return this.anim.getCurrentFrame()},drawCurrentFrame:function(a){var c=
this.anim.getCurrentFrame();a.drawImage(this.anim.image,c.imgSlotX*this.anim.width,c.imgSlotY*this.anim.height,this.anim.width,this.anim.height,this.x,this.y,this.anim.width,this.anim.height)},draw:function(a){this.anim&&this.anim.draw(a,this.x,this.y)},clone:function(){return new f({anim:this.anim.clone()})}});return f})},"frozen/Animation":function(){define(["./AnimFrame","dojo/_base/declare","dojo/_base/lang"],function(c,f,a){var g=f(null,{currFrameIndex:0,animTime:0,totalDuration:0,height:64,
width:64,image:null,constructor:function(a){f.safeMixin(this,a);this.start()},createFromTile:function(a,c,f,g,o,b){return this.createFromSheet(a,c,f,o,g,b)},createFromSheet:function(c,f,h,k,o,b){h=new g({image:h,height:o,width:k});k=a.isArray(f);o=1;b||(b=0);for(var i=0;i<c;i++)o=k?f[i]:f,h.addFrame(o,i,b);return h},clone:function(){return new g({image:this.image,frames:this.frames,totalDuration:this.totalDuration})},addFrame:function(a,f,g){if(!this.frames)this.frames=[];this.totalDuration+=a;this.frames.push(new c({endTime:this.totalDuration,
image:this.image,imgSlotX:f,imgSlotY:g}))},start:function(){this.currFrameIndex=this.animTime=0},update:function(a){if(1<this.frames.length){this.animTime+=a;if(this.animTime>=this.totalDuration)this.animTime%=this.totalDuration,this.currFrameIndex=0;for(;this.animTime>this.getFrame(this.currFrameIndex).endTime;)this.currFrameIndex++}},getImage:function(){return this.image},getFrame:function(a){return this.frames[a]},getCurrentFrame:function(){return 0===this.frames.length?null:this.getFrame(this.currFrameIndex)},
draw:function(a,c,f){var g=this.getCurrentFrame();a.drawImage(this.image,g.imgSlotX*this.width,g.imgSlotY*this.height,this.width,this.height,c,f,this.width,this.height)}});return g})},"frozen/AnimFrame":function(){define(["dojo/_base/declare"],function(c){return c(null,{endTime:0,imgSlotX:0,imgSlotY:0,image:null,constructor:function(f){c.safeMixin(this,f)}})})},"frozen/GameAction":function(){define(["dojo/_base/declare"],function(c){return c(null,{name:null,behavior:0,amount:0,state:0,statics:{NORMAL:0,
DETECT_INITAL_PRESS_ONLY:1,STATE_RELEASED:0,STATE_PRESSED:1,STATE_WAITING_FOR_RELEASE:2,STATE_MOVED:3},constructor:function(f){c.safeMixin(this,f);this.reset()},getName:function(){return this.name},reset:function(){this.state=this.statics.STATE_RELEASED;this.amount=0},tap:function(){this.press();this.release()},press:function(){this.state=this.statics.STATE_PRESSED;this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY&&this.pressAmt(1)},pressAmt:function(c){if(this.state!==this.statics.STATE_WAITING_FOR_RELEASE)this.amount+=
c,this.state=this.statics.STATE_WAITING_FOR_RELEASE},release:function(){this.state=this.statics.STATE_RELEASED},isPressed:function(){return this.state===this.statics.STATE_PRESSED?!0:!1},getAmount:function(){var c=this.amount;if(0!==c)if(this.state===this.statics.STATE_RELEASED)this.amount=0;else if(this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY)this.state=this.statics.STATE_WAITING_FOR_RELEASE,this.amount=0;return c}})})},"frozen/MouseAction":function(){define(["dojo/_base/declare","./GameAction"],
function(c,f){return c([f],{startPosition:null,endPosition:null,position:null,constructor:function(a){c.safeMixin(this,a);this.reset()}})})},"frozen/GameCore":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/dom,./InputManager,./ResourceManager,./shims/RAF".split(","),function(c,f,a,g,j){return c(null,{statics:{FONT_SIZE:24},isRunning:!1,canvasId:null,maxStep:40,contextType:"2d",height:0,width:0,resourceManager:null,inputManager:null,loadingForeground:"#00F",loadingBackground:"#FFF",gameAreaId:null,
canvasPercentage:0,constructor:function(a){c.safeMixin(this,a)},stop:function(){this.isRunning=!1},run:function(){this.isRunning||(this.init(),this.loadResources(this.resourceManager),this.initInput(this.inputManager),this.launchLoop())},loadResources:function(){},init:function(){if(!this.canvas)this.canvas=a.byId(this.canvasId);if(this.canvas){if(!this.context)this.context=this.canvas.getContext(this.contextType);if(this.context){this.height?this.canvas.height=this.height:this.height=this.canvas.height;
this.width?this.canvas.width=this.width:this.width=this.canvas.width;if(!this.inputManager)this.inputManager=this.gameAreaId&&this.canvasPercentage?new g({canvas:this.canvas,gameArea:a.byId(this.gameAreaId),canvasPercentage:this.canvasPercentage}):new g({canvas:this.canvas});this.inputManager.resize();if(!this.resourceManager)this.resourceManager=new j;this.loadResources(this.resourceManager);this.isRunning=!0}else alert("Sorry, your browser does not support a "+this.contextType+" drawing surface on canvas.  I recommend any browser but Internet Explorer")}else alert("Sorry, your browser does not support canvas.  I recommend any browser but Internet Explorer")},
initInput:function(){},handleInput:function(){},gameLoop:function(){this.currTime=(new Date).getTime();this.elapsedTime=Math.min(this.currTime-this.prevTime,this.maxStep);this.prevTime=this.currTime;this.resourceManager&&!this.resourceManager.resourcesReady()?(this.updateLoadingScreen(this.elapsedTime),this.drawLoadingScreen(this.context)):(this.handleInput(this.inputManager,this.elapsedTime),this.paused||this.update(this.elapsedTime),this.context.save(),this.draw(this.context),this.context.restore())},
launchLoop:function(){this.elapsedTime=0;var a=Date.now();this.prevTime=this.currTime=a;this.loopRunner=f.hitch(this,this.loopRunner);window.requestAnimationFrame(this.loopRunner)},loopRunner:function(){this.gameLoop();window.requestAnimationFrame(this.loopRunner)},update:function(){},updateLoadingScreen:function(){},draw:function(a){if("2d"===this.contextType)a.font="14px sans-serif",a.fillText("This game does not have its own draw function!",10,50)},drawLoadingScreen:function(a){if(this.resourceManager&&
"2d"===this.contextType)a.fillStyle=this.loadingBackground,a.fillRect(0,0,this.width,this.height),a.fillStyle=this.loadingForeground,a.strokeStyle=this.loadingForeground,a.font="bold "+Math.floor(this.height/12)+"px sans-serif",a.fillText("Loading... "+this.resourceManager.getPercentComplete()+"%",0.1*this.width,0.55*this.height),a.strokeRect(0.1*this.width,0.7*this.height,0.8*this.width,0.1*this.height),a.fillRect(0.1*this.width,0.7*this.height,0.8*this.width*this.resourceManager.getPercentComplete()/
100,0.1*this.height),a.lineWidth=4}})})},"dojo/dom":function(){define("dojo/dom",["./sniff","./_base/window"],function(c,f){if(7>=c("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}var g={};g.byId=c("ie")?function(a,c){if("string"!=typeof a)return a;var g=c||f.doc,j=a&&g.getElementById(a);if(j&&(j.attributes.id.value==a||j.id==a))return j;g=g.all[a];if(!g||g.nodeName)g=[g];for(var b=0;j=g[b++];)if(j.attributes&&j.attributes.id&&j.attributes.id.value==a||j.id==a)return j}:function(a,
c){return("string"==typeof a?(c||f.doc).getElementById(a):a)||null};g.isDescendant=function(a,c){try{a=g.byId(a);for(c=g.byId(c);a;){if(a==c)return!0;a=a.parentNode}}catch(f){}return!1};c.add("css-user-select",function(a,c,f){if(!f)return!1;var a=f.style,c=["Khtml","O","ms","Moz","Webkit"],f=c.length,g="userSelect";do if("undefined"!==typeof a[g])return g;while(f--&&(g=c[f]+"UserSelect"));return!1});var j=c("css-user-select");g.setSelectable=j?function(a,c){g.byId(a).style[j]=c?"":"none"}:function(a,
c){var a=g.byId(a),f=a.getElementsByTagName("*"),j=f.length;if(c)for(a.removeAttribute("unselectable");j--;)f[j].removeAttribute("unselectable");else for(a.setAttribute("unselectable","on");j--;)f[j].setAttribute("unselectable","on")};return g})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(c,f,a){var g={global:c.global,doc:this.document||null,body:function(a){a=a||c.doc;return a.body||a.getElementsByTagName("body")[0]},setContext:function(a,f){c.global=g.global=
a;c.doc=g.doc=f},withGlobal:function(a,f,h,k){var o=c.global;try{return c.global=g.global=a,g.withDoc.call(null,a.document,f,h,k)}finally{c.global=g.global=o}},withDoc:function(f,n,h,k){var o=g.doc,b=a("quirks"),i=a("ie"),d,e,p;try{c.doc=g.doc=f;c.isQuirks=a.add("quirks","BackCompat"==c.doc.compatMode,!0,!0);if(a("ie")&&(p=f.parentWindow)&&p.navigator)d=parseFloat(p.navigator.appVersion.split("MSIE ")[1])||void 0,(e=f.documentMode)&&5!=e&&Math.floor(d)!=e&&(d=e),c.isIE=a.add("ie",d,!0,!0);h&&"string"==
typeof n&&(n=h[n]);return n.apply(h,k||[])}finally{c.doc=g.doc=o,c.isQuirks=a.add("quirks",b,!0,!0),c.isIE=a.add("ie",i,!0,!0)}}};f.mixin(c,g);return g})},"frozen/InputManager":function(){define("./GameAction,./MouseAction,dojo/_base/declare,dojo/on,dojo/dom-geometry,dojo/_base/lang,dojo/domReady!".split(","),function(c,f,a,g,j,n){return a(null,{keyActions:[],mouseAction:null,touchAction:null,canvas:null,handleMouse:!0,handleTouch:!0,handleKeys:!0,gameArea:null,canvasPercentage:null,constructor:function(c){a.safeMixin(this,
c);this.handleKeys&&(g(document,"keydown",n.hitch(this,"keyDown")),g(document,"keyup",n.hitch(this,"keyReleased")));this.handleMouse&&(g(this.canvas,"mousedown",n.hitch(this,"mouseDown")),g(document,"mouseup",n.hitch(this,"mouseUp")),g(this.canvas,"mousemove",n.hitch(this,"mouseMove")));this.handleTouch&&(g(document,"touchend",n.hitch(this,"touchEnd")),g(this.canvas,"touchstart",n.hitch(this,"touchStart")),g(this.canvas,"touchmove",n.hitch(this,"touchMove")));if(!this.mouseAction)this.mouseAction=
new f;if(!this.touchAction)this.touchAction=new f;this.gameArea&&this.canvasPercentage&&(window.addEventListener("resize",n.hitch(this,"resize"),!1),window.addEventListener("orientationchange",n.hitch(this,"resize"),!1))},mapToKey:function(a,c){if(!this.keyActions)this.keyActions=[];this.keyActions[c]=a},addKeyAction:function(a,f){var g=new c;if(f)g.behavior=g.statics.DETECT_INITAL_PRESS_ONLY;this.mapToKey(g,a);return g},setMouseAction:function(a){this.mouseAction=a},setTouchAction:function(a){this.touchAction=
a},mouseUp:function(a){this.mouseAction.release();this.mouseAction.endPosition=this.getMouseLoc(a)},mouseDown:function(a){this.mouseAction.press();this.mouseAction.startPosition=this.getMouseLoc(a);this.mouseAction.position=this.mouseAction.startPosition},mouseMove:function(a){this.mouseAction.position=this.getMouseLoc(a)},touchStart:function(a){this.touchAction.press();this.touchAction.startPosition=this.getMouseLoc(a.changedTouches[0]);this.touchAction.position=this.touchAction.startPosition},touchEnd:function(a){this.touchAction.release();
this.mouseAction.endPosition=this.getMouseLoc(a)},touchMove:function(a){this.touchAction.position=this.getMouseLoc(a.changedTouches[0]);a.preventDefault()},getKeyAction:function(a){return this.keyActions.length?this.keyActions[a.keyCode]||this.keyActions[String.fromCharCode(a.keyCode)]:null},keyPressed:function(a){(a=this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyDown:function(a){(a=this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyReleased:function(a){(a=this.getKeyAction(a))&&a.release()},
getMouseLoc:function(a){var c=j.position(this.canvas);return this.zoomRatio?{x:Math.round((a.clientX-c.x)/this.zoomRatio),y:Math.round((a.clientY-c.y)/this.zoomRatio)}:{x:Math.round(a.clientX-c.x),y:Math.round(a.clientY-c.y)}},resize:function(){if(this.gameArea&&this.canvasPercentage&&this.canvas){var a=this.canvas.width/this.canvas.height,c=window.innerWidth,f=window.innerHeight;c/f>a?(c=f*a,this.gameArea.style.height=Math.round(f)+"px",this.gameArea.style.width=c+"px"):(f=Math.round(c/a),this.gameArea.style.width=
c+"px",this.gameArea.style.height=f+"px");this.zoomRatio=c/this.canvas.width*this.canvasPercentage;this.canvas.style.width=Math.floor(100*this.canvasPercentage)+"%";this.canvas.style.height=Math.floor(100*this.canvasPercentage)+"%"}}})})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./has"],function(c,f,a){function g(b,c,e,f,g){if(f=c.match(/(.*):(.*)/))return c=f[2],f=f[1],k.selector(f,c).call(g,b,e);a("touch")&&(o.test(c)&&(e=F(e)),!a("event-orientationchange")&&
"orientationchange"==c&&(c="resize",b=window,e=F(e)));p&&(e=p(e));if(b.addEventListener){var i=c in d,l=i?d[c]:c;b.addEventListener(l,e,i);return{remove:function(){b.removeEventListener(l,e,i)}}}if(x&&b.attachEvent)return x(b,"on"+c,e);throw Error("Target must be an event emitter");}function j(){this.cancelable=!1}function n(){this.bubbles=!1}var h=window.ScriptEngineMajorVersion;a.add("jscript",h&&h()+ScriptEngineMinorVersion()/10);a.add("event-orientationchange",a("touch")&&!a("android"));a.add("event-stopimmediatepropagation",
window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var k=function(b,a,c,d){return"function"==typeof b.on&&"function"!=typeof a?b.on(a,c):k.parse(b,a,c,g,d,this)};k.pausable=function(b,a,c,d){var e,b=k(b,a,function(){if(!e)return c.apply(this,arguments)},d);b.pause=function(){e=!0};b.resume=function(){e=!1};return b};k.once=function(b,a,c){var d=k(b,a,function(){d.remove();return c.apply(this,arguments)});return d};k.parse=function(b,a,c,d,e,f){if(a.call)return a.call(f,
b,c);if(-1<a.indexOf(",")){for(var a=a.split(/\s*,\s*/),i=[],g=0,l;l=a[g++];)i.push(d(b,l,c,e,f));i.remove=function(){for(var b=0;b<i.length;b++)i[b].remove()};return i}return d(b,a,c,e,f)};var o=/^touch/;k.selector=function(b,a,c){return function(d,e){function i(a){for(g=g&&g.matches?g:f.query;!g.matches(a,b,d);)if(a==d||!1===c||!(a=a.parentNode)||1!=a.nodeType)return;return a}var g="function"==typeof b?{matches:b}:this,l=a.bubble;return l?k(d,l(i),e):k(d,a,function(b){var a=i(b.target);return a&&
e.call(a,b)})}};var b=[].slice,i=k.emit=function(a,c,d){var e=b.call(arguments,2),f="on"+c;if("parentNode"in a){var i=e[0]={},g;for(g in d)i[g]=d[g];i.preventDefault=j;i.stopPropagation=n;i.target=a;i.type=c;d=i}do a[f]&&a[f].apply(a,e);while(d&&d.bubbles&&(a=a.parentNode));return d&&d.cancelable&&d},d={};if(!a("event-stopimmediatepropagation"))var e=function(){this.modified=this.immediatelyStopped=!0},p=function(b){return function(a){if(!a.immediatelyStopped)return a.stopImmediatePropagation=e,b.apply(this,
arguments)}};if(a("dom-addeventlistener"))d={focusin:"focus",focusout:"blur"},k.emit=function(b,a,c){if(b.dispatchEvent&&document.createEvent){var d=b.ownerDocument.createEvent("HTMLEvents");d.initEvent(a,!!c.bubbles,!!c.cancelable);for(var e in c)e in d||(d[e]=c[e]);return b.dispatchEvent(d)&&d}return i.apply(k,arguments)};else{k._fixEvent=function(b,a){if(!b)b=(a&&(a.ownerDocument||a.document||a).parentWindow||window).event;if(!b)return b;l&&b.type==l.type&&(b=l);if(!b.target){b.target=b.srcElement;
b.currentTarget=a||b.srcElement;if("mouseover"==b.type)b.relatedTarget=b.fromElement;if("mouseout"==b.type)b.relatedTarget=b.toElement;if(!b.stopPropagation)b.stopPropagation=E,b.preventDefault=G;switch(b.type){case "keypress":var c="charCode"in b?b.charCode:b.keyCode;10==c?(c=0,b.keyCode=13):13==c||27==c?c=0:3==c&&(c=99);b.charCode=c;c=b;c.keyChar=c.charCode?String.fromCharCode(c.charCode):"";c.charOrCode=c.keyChar||c.keyCode}}return b};var l,B=function(b){this.handle=b};B.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};
var m=function(b){return function(a){var a=k._fixEvent(a,this),c=b.call(this,a);a.modified&&(l||setTimeout(function(){l=null}),l=a);return c}},x=function(b,d,e){e=m(e);if(((b.ownerDocument?b.ownerDocument.parentWindow:b.parentWindow||b.window||window)!=top||5.8>a("jscript"))&&!a("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var f=b[d];if(!f||!f.listeners){var i=f,f=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
f.listeners=[];b[d]=f;f.global=this;i&&f.listeners.push(_dojoIEListeners_.push(i)-1)}f.listeners.push(b=f.global._dojoIEListeners_.push(e)-1);return new B(b)}return c.after(b,d,e,!0)},E=function(){this.cancelBubble=!0},G=k._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(b){}this.defaultPrevented=!0;this.returnValue=!1}}if(a("touch"))var v=function(){},s=window.orientation,F=function(b){return function(a){var c=a.corrected;if(!c){var d=a.type;try{delete a.type}catch(e){}a.type?
(v.prototype=a,c=new v,c.preventDefault=function(){a.preventDefault()},c.stopPropagation=function(){a.stopPropagation()}):(c=a,c.type=d);a.corrected=c;if("resize"==d){if(s==window.orientation)return null;s=window.orientation;c.type="orientationchange";return b.call(this,c)}if(!("rotation"in c))c.rotation=0,c.scale=1;var d=c.changedTouches[0],f;for(f in d)delete c[f],c[f]=d[f]}return b.call(this,c)}};return k})},"dojo/dom-geometry":function(){define("dojo/dom-geometry",["./sniff","./_base/window",
"./dom","./dom-style"],function(c,f,a,g){function j(b,a,c,e,f,g){g=g||"px";b=b.style;if(!isNaN(a))b.left=a+g;if(!isNaN(c))b.top=c+g;if(0<=e)b.width=e+g;if(0<=f)b.height=f+g}function n(b){return"button"==b.tagName.toLowerCase()||"input"==b.tagName.toLowerCase()&&"button"==(b.getAttribute("type")||"").toLowerCase()}function h(b){return"border-box"==k.boxModel||"table"==b.tagName.toLowerCase()||n(b)}var k={boxModel:"content-box"};if(c("ie"))k.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";
k.getPadExtents=function(b,c){var b=a.byId(b),d=c||g.getComputedStyle(b),e=g.toPixelValue,f=e(b,d.paddingLeft),l=e(b,d.paddingTop),h=e(b,d.paddingRight),d=e(b,d.paddingBottom);return{l:f,t:l,r:h,b:d,w:f+h,h:l+d}};k.getBorderExtents=function(b,c){var b=a.byId(b),d=g.toPixelValue,e=c||g.getComputedStyle(b),f="none"!=e.borderLeftStyle?d(b,e.borderLeftWidth):0,l="none"!=e.borderTopStyle?d(b,e.borderTopWidth):0,h="none"!=e.borderRightStyle?d(b,e.borderRightWidth):0,d="none"!=e.borderBottomStyle?d(b,e.borderBottomWidth):
0;return{l:f,t:l,r:h,b:d,w:f+h,h:l+d}};k.getPadBorderExtents=function(b,c){var b=a.byId(b),d=c||g.getComputedStyle(b),e=k.getPadExtents(b,d),d=k.getBorderExtents(b,d);return{l:e.l+d.l,t:e.t+d.t,r:e.r+d.r,b:e.b+d.b,w:e.w+d.w,h:e.h+d.h}};k.getMarginExtents=function(b,c){var b=a.byId(b),d=c||g.getComputedStyle(b),e=g.toPixelValue,f=e(b,d.marginLeft),l=e(b,d.marginTop),h=e(b,d.marginRight),d=e(b,d.marginBottom);return{l:f,t:l,r:h,b:d,w:f+h,h:l+d}};k.getMarginBox=function(b,f){var b=a.byId(b),d=f||g.getComputedStyle(b),
e=k.getMarginExtents(b,d),p=b.offsetLeft-e.l,l=b.offsetTop-e.t,h=b.parentNode,j=g.toPixelValue;if(c("mozilla")){var n=parseFloat(d.left),d=parseFloat(d.top);!isNaN(n)&&!isNaN(d)?(p=n,l=d):h&&h.style&&(h=g.getComputedStyle(h),"visible"!=h.overflow&&(p+="none"!=h.borderLeftStyle?j(b,h.borderLeftWidth):0,l+="none"!=h.borderTopStyle?j(b,h.borderTopWidth):0))}else if((c("opera")||8==c("ie")&&!c("quirks"))&&h)h=g.getComputedStyle(h),p-="none"!=h.borderLeftStyle?j(b,h.borderLeftWidth):0,l-="none"!=h.borderTopStyle?
j(b,h.borderTopWidth):0;return{l:p,t:l,w:b.offsetWidth+e.w,h:b.offsetHeight+e.h}};k.getContentBox=function(b,f){var b=a.byId(b),d=f||g.getComputedStyle(b),e=b.clientWidth,h=k.getPadExtents(b,d),l=k.getBorderExtents(b,d);e?(d=b.clientHeight,l.w=l.h=0):(e=b.offsetWidth,d=b.offsetHeight);c("opera")&&(h.l+=l.l,h.t+=l.t);return{l:h.l,t:h.t,w:e-h.w-l.w,h:d-h.h-l.h}};k.setContentSize=function(b,c,d){var b=a.byId(b),e=c.w,c=c.h;h(b)&&(d=k.getPadBorderExtents(b,d),0<=e&&(e+=d.w),0<=c&&(c+=d.h));j(b,NaN,NaN,
e,c)};var o={l:0,t:0,w:0,h:0};k.setMarginBox=function(b,f,d){var b=a.byId(b),e=d||g.getComputedStyle(b),d=f.w,p=f.h,l=h(b)?o:k.getPadBorderExtents(b,e),e=k.getMarginExtents(b,e);if(c("webkit")&&n(b)){var B=b.style;if(0<=d&&!B.width)B.width="4px";if(0<=p&&!B.height)B.height="4px"}0<=d&&(d=Math.max(d-l.w-e.w,0));0<=p&&(p=Math.max(p-l.h-e.h,0));j(b,f.l,f.t,d,p)};k.isBodyLtr=function(b){b=b||f.doc;return"ltr"==(f.body(b).dir||b.documentElement.dir||"ltr").toLowerCase()};k.docScroll=function(b){var b=
b||f.doc,a=f.doc.parentWindow||f.doc.defaultView;return"pageXOffset"in a?{x:a.pageXOffset,y:a.pageYOffset}:(a=c("quirks")?f.body(b):b.documentElement)&&{x:k.fixIeBiDiScrollLeft(a.scrollLeft||0,b),y:a.scrollTop||0}};if(c("ie"))k.getIeDocumentElementOffset=function(b){b=b||f.doc;b=b.documentElement;if(8>c("ie")){var a=b.getBoundingClientRect(),d=a.left,a=a.top;7>c("ie")&&(d+=b.clientLeft,a+=b.clientTop);return{x:0>d?0:d,y:0>a?0:a}}return{x:0,y:0}};k.fixIeBiDiScrollLeft=function(b,a){var a=a||f.doc,
d=c("ie");if(d&&!k.isBodyLtr(a)){var e=c("quirks"),g=e?f.body(a):a.documentElement,l=f.global;6==d&&!e&&l.frameElement&&g.scrollHeight>g.clientHeight&&(b+=g.clientLeft);return 8>d||e?b+g.clientWidth-g.scrollWidth:-b}return b};k.position=function(b,g){var b=a.byId(b),d=f.body(b.ownerDocument),e=b.getBoundingClientRect(),e={x:e.left,y:e.top,w:e.right-e.left,h:e.bottom-e.top};if(9>c("ie")){var h=k.getIeDocumentElementOffset(b.ownerDocument);e.x-=h.x+(c("quirks")?d.clientLeft+d.offsetLeft:0);e.y-=h.y+
(c("quirks")?d.clientTop+d.offsetTop:0)}g&&(d=k.docScroll(b.ownerDocument),e.x+=d.x,e.y+=d.y);return e};k.getMarginSize=function(b,c){var b=a.byId(b),d=k.getMarginExtents(b,c||g.getComputedStyle(b)),e=b.getBoundingClientRect();return{w:e.right-e.left+d.w,h:e.bottom-e.top+d.h}};k.normalizeEvent=function(b){if(!("layerX"in b))b.layerX=b.offsetX,b.layerY=b.offsetY;if(!c("dom-addeventlistener")){var a=b.target,a=a&&a.ownerDocument||document,d=c("quirks")?a.body:a.documentElement,e=k.getIeDocumentElementOffset(a);
b.pageX=b.clientX+k.fixIeBiDiScrollLeft(d.scrollLeft||0,a)-e.x;b.pageY=b.clientY+(d.scrollTop||0)-e.y}};return k})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(c,f){function a(a,d,e){d=d.toLowerCase();if(c("ie")){if("auto"==e){if("height"==d)return a.offsetHeight;if("width"==d)return a.offsetWidth}if("fontweight"==d)switch(e){case 700:return"bold";default:return"normal"}}d in b||(b[d]=i.test(d));return b[d]?n(a,e):e}var g,j={};g=c("webkit")?function(a){var b;if(1==a.nodeType){var c=
a.ownerDocument.defaultView;b=c.getComputedStyle(a,null);if(!b&&a.style)a.style.display="",b=c.getComputedStyle(a,null)}return b||{}}:c("ie")&&(9>c("ie")||c("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};j.getComputedStyle=g;var n;n=c("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var c=a.style,d=a.runtimeStyle,e=c.left,
f=d.left;d.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(g){b=0}c.left=e;d.left=f;return b}:function(a,b){return parseFloat(b)||0};j.toPixelValue=n;var h=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return b?{}:null}},k=9>c("ie")||10>c("ie")&&c("quirks")?function(a){try{return h(a).Opacity/100}catch(b){return 1}}:function(a){return g(a).opacity},o=9>c("ie")||10>c("ie")&&c("quirks")?function(a,b){var c=100*b,d=1==b;a.style.zoom=d?"":1;if(h(a))h(a,
1).Opacity=c;else{if(d)return b;a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+c+")"}h(a,1).Enabled=!d;if("tr"==a.tagName.toLowerCase())for(c=a.firstChild;c;c=c.nextSibling)"td"==c.tagName.toLowerCase()&&o(c,b);return b}:function(a,b){return a.style.opacity=b},b={left:!0,top:!0},i=/margin|padding|width|height|max|min|offset/,d=c("ie")?"styleFloat":"cssFloat",e={cssFloat:d,styleFloat:d,"float":d};j.get=function(b,c){var d=f.byId(b),g=arguments.length;if(2==g&&"opacity"==c)return k(d);
var c=e[c]||c,i=j.getComputedStyle(d);return 1==g?i:a(d,c,i[c]||d.style[c])};j.set=function(a,b,c){var d=f.byId(a),g=arguments.length,i="opacity"==b,b=e[b]||b;if(3==g)return i?o(d,c):d.style[b]=c;for(var h in b)j.set(a,h,b[h]);return j.getComputedStyle(d)};return j})},"dojo/domReady":function(){define(["./has"],function(c){function f(a){h?a(g):k.push(a)}var a=this,g=document,j={loaded:1,complete:1},n="string"!=typeof g.readyState,h=!!j[g.readyState];if(n)g.readyState="loading";if(!h){var k=[],o=[],
b=function(b){b=b||a.event;if(!(h||"readystatechange"==b.type&&!j[g.readyState])){h=1;if(n)g.readyState="complete";for(;k.length;)k.shift()(g)}},i=function(a,c){a.addEventListener(c,b,!1);k.push(function(){a.removeEventListener(c,b,!1)})};if(!c("dom-addeventlistener")){var i=function(a,c){c="on"+c;a.attachEvent(c,b);k.push(function(){a.detachEvent(c,b)})},d=g.createElement("div");try{d.doScroll&&null===a.frameElement&&o.push(function(){try{return d.doScroll("left"),1}catch(a){}})}catch(e){}}i(g,"DOMContentLoaded");
i(a,"load");"onreadystatechange"in g?i(g,"readystatechange"):n||o.push(function(){return j[g.readyState]});if(o.length){var p=function(){if(!h){for(var a=o.length;a--;)if(o[a]()){b("poller");return}setTimeout(p,30)}};p()}}f.load=function(a,b,c){f(c)};return f})},"frozen/ResourceManager":function(){define(["dojo/_base/declare","./shims/AudioContext"],function(c){return c(null,{imageCount:0,loadedImages:0,allLoaded:!1,imageDir:null,soundsDir:null,audioContext:null,resourceList:[],constructor:function(f){c.safeMixin(this,
f);if(window.AudioContext)this.audioContext=new window.AudioContext},loadImage:function(c){for(var a=0;a<this.resourceList.length;a++)if(this.resourceList[a].name===c)return this.resourceList[a].img;this.allLoaded=!1;var a=new Image,g={name:c,img:a,complete:!1};this.imageDir&&(c=this.imageDir+c);a.onload=function(){g.complete=!0};a.src=c;this.resourceList.push(g);return a},loadSound:function(c){this.soundsDir&&(c=this.soundsDir+c);var a={name:c,buffer:null,complete:!1};if(this.audioContext){this.resourceList.push(a);
var g=new XMLHttpRequest;g.open("GET",c,!0);g.responseType="arraybuffer";var j=this.audioContext;g.onload=function(){j.decodeAudioData(g.response,function(c){a.buffer=c;a.complete=!0},function(){})};g.send()}return a},playSound:function(c,a,g,j){g=g||0;if(this.audioContext&&c&&(c=c.buffer||c))try{var n=this.audioContext.createBufferSource();n.buffer=c;if(a)n.loop=!0;if(j){var h=this.audioContext.createGainNode();h.gain.value=j;n.connect(h);h.connect(this.audioContext.destination)}else n.connect(this.audioContext.destination);
n.noteOn(g);return n}catch(k){}},resourcesReady:function(){if(!this.allLoaded){for(var c=0;c<this.resourceList.length;c++)if(!this.resourceList[c].complete)return!1;this.allLoaded=!0}return!0},getPercentComplete:function(){for(var c=0,a=0;a<this.resourceList.length;a++)this.resourceList[a].complete&&(c+=1);return 0===this.resourceList.length?0:Math.round(100*(c/this.resourceList.length))}})})},"frozen/shims/AudioContext":function(){define(function(){for(var c=["ms","moz","webkit","o"],f=0;f<c.length&&
!window.AudioContext;++f)window.AudioContext=window[c[f]+"AudioContext"]})},"frozen/shims/RAF":function(){define(function(){for(var c=0,f=["ms","moz","webkit","o"],a=0;a<f.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[f[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[f[a]+"CancelAnimationFrame"]||window[f[a]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame)window.requestAnimationFrame=function(a){var f=(new Date).getTime(),n=Math.max(0,
16-(f-c)),h=window.setTimeout(function(){a(f+n)},n);c=f+n;return h};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(a){clearTimeout(a)}})},"frozen/utils":function(){define("./utils/degreesToRadians,./utils/radiansToDegrees,./utils/pointInPolygon,./utils/distance,./utils/degreesFromCenter,./utils/radiansFromCenter,./utils/scalePoints,./utils/translatePoints".split(","),function(c,f,a,g,j,n,h,k){return{degreesToRadians:c,radiansToDegrees:f,pointInPolygon:a,distance:g,degreesFromCenter:j,
radiansFromCenter:n,scalePoints:h,translatePoints:k}})},"frozen/utils/degreesToRadians":function(){define(function(){var c=Math.PI/180;return function(f){return f*c}})},"frozen/utils/radiansToDegrees":function(){define(function(){var c=180/Math.PI;return function(f){return f*c}})},"frozen/utils/pointInPolygon":function(){define(function(){return function(c,f){for(var a=f.points||f,g=!1,j=-1,n=a.length,h=n-1;++j<n;h=j)(a[j].y<=c.y&&c.y<a[h].y||a[h].y<=c.y&&c.y<a[j].y)&&c.x<(a[h].x-a[j].x)*(c.y-a[j].y)/
(a[h].y-a[j].y)+a[j].x&&(g=!g);return g}})},"frozen/utils/distance":function(){define(function(){return function(c,f){return Math.sqrt((f.x-c.x)*(f.x-c.x)+(f.y-c.y)*(f.y-c.y))}})},"frozen/utils/degreesFromCenter":function(){define(["./radiansToDegrees","./radiansFromCenter"],function(c,f){return function(a,g){return c(f(a,g))}})},"frozen/utils/radiansFromCenter":function(){define(function(){var c={x:0,y:0};return function(f,a){f=f||c;return f.x===a.x&&f.y===a.y?0:f.x===a.x?f.y>a.y?0:Math.PI:f.y===
a.y?f.x>a.x?1.5*Math.PI:Math.PI/2:f.x<a.x&&f.y>a.y?Math.atan((a.x-f.x)/(f.y-a.y)):f.x<a.x&&f.y<a.y?Math.PI/2+Math.atan((a.y-f.y)/(a.x-f.x)):f.x>a.x&&f.y<a.y?Math.PI+Math.atan((f.x-a.x)/(a.y-f.y)):1.5*Math.PI+Math.atan((f.y-a.y)/(f.x-a.x))}})},"frozen/utils/scalePoints":function(){define(["dojo/_base/array","dojo/_base/lang"],function(c,f){var a=function(g,j){f.isArray(g)?c.forEach(g,function(c){a(c,j)}):(g.x*=j,g.y*=j);return g};return a})},"dojo/_base/array":function(){define(["./kernel","../has",
"./lang"],function(c,f,a){function g(a){return h[a]=new Function("item","index","array",a)}function j(a){var c=!a;return function(d,e,f){var j=0,k=d&&d.length||0,m;k&&"string"==typeof d&&(d=d.split(""));"string"==typeof e&&(e=h[e]||g(e));if(f)for(;j<k;++j){if(m=!e.call(f,d[j],j,d),a^m)return!m}else for(;j<k;++j)if(m=!e(d[j],j,d),a^m)return!m;return c}}function n(a){var c=1,d=0,e=0;a||(c=d=e=-1);return function(f,g,h,j){if(j&&0<c)return o.lastIndexOf(f,g,h);var j=f&&f.length||0,n=a?j+e:d;h===k?h=a?
d:j+e:0>h?(h=j+h,0>h&&(h=d)):h=h>=j?j+e:h;for(j&&"string"==typeof f&&(f=f.split(""));h!=n;h+=c)if(f[h]==g)return h;return-1}}var h={},k,o={every:j(!1),some:j(!0),indexOf:n(!0),lastIndexOf:n(!1),forEach:function(a,c,d){var e=0,f=a&&a.length||0;f&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=h[c]||g(c));if(d)for(;e<f;++e)c.call(d,a[e],e,a);else for(;e<f;++e)c(a[e],e,a)},map:function(a,c,d,e){var f=0,j=a&&a.length||0,e=new (e||Array)(j);j&&"string"==typeof a&&(a=a.split(""));"string"==
typeof c&&(c=h[c]||g(c));if(d)for(;f<j;++f)e[f]=c.call(d,a[f],f,a);else for(;f<j;++f)e[f]=c(a[f],f,a);return e},filter:function(a,c,d){var e=0,f=a&&a.length||0,j=[],k;f&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=h[c]||g(c));if(d)for(;e<f;++e)k=a[e],c.call(d,k,e,a)&&j.push(k);else for(;e<f;++e)k=a[e],c(k,e,a)&&j.push(k);return j},clearCache:function(){h={}}};a.mixin(c,o);return o})},"frozen/utils/translatePoints":function(){define(["dojo/_base/array","dojo/_base/lang"],function(c,
f){var a=function(g,j){f.isArray(g)?c.forEach(g,function(c){a(c,j)}):(j.hasOwnProperty("x")&&(g.x+=j.x),j.hasOwnProperty("y")&&(g.y+=j.y));return g};return a})},"dojo/keys":function(){define("dojo/keys",["./_base/kernel","./sniff"],function(c,f){return c.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:f("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,
LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:f("mac")&&!f("air")?f("safari")?
91:224:17}})}}});(function(){require({cache:{}});require.boot&&require.apply(null,require.boot)})();